homeassistant:
  # Name of the location where Home Assistant is running
  name: Home
  # Location required to calculate the time the sun rises and sets
  latitude: !secret home_latitude
  longitude: !secret home_longitude
  # Impacts weather/sunrise data (altitude above sea level in meters)
  elevation: 104.23
  # metric for Metric, imperial for Imperial
  unit_system: imperial
  # Pick yours from here: http://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  time_zone: America/New_York

zone:
  name: Work
  latitude: !secret work_latitude
  longitude: !secret work_longitude
  radius: 175
  icon: mdi:worker

# Show links to resources in log and frontend
introduction:

# Enables the frontend
frontend:

# Enables configuration UI
config:

mqtt:
  broker: m13.cloudmqtt.com
  port: 22371
  client_id: home-assistant-server
  keepalive: 60
  username: !secret mqtt_user
  password: !secret mqtt_password
  protocol: 3.1

device_tracker:
  - platform: owntracks
    max_gps_accuracy: 200
    waypoints: True

http:
  # Uncomment this to add a password (recommended!)
  api_password: !secret api_password
  # Uncomment this if you are using SSL or running in Docker etc
  # base_url: example.duckdns.org:8123
  ssl_certificate: /home/jshore/.homeassistant/fullchain.pem
  ssl_key: /home/jshore/.homeassistant/privkey.pem

# Checks for available updates
# Note: This component will send some information about your system to
# the developers to assist with development of Home Assistant.
# For more information, please see:
# https://home-assistant.io/blog/2016/10/25/explaining-the-updater/
updater:

# Discover some devices automatically
# discovery:

# Allows you to issue voice commands from the frontend in enabled browsers
conversation:

# Enables support for tracking state changes over time.
history:

# View all events in a logbook
logbook:

# Track the sun
sun:

# Weather Prediction
sensor:
  - platform: wunderground
    api_key: !secret wunderground_key
    pws_id: !secret wunderground_id
    monitored_conditions:
      - weather_1d
      - weather_1n
      - weather_2d
      - weather_2n
      - weather_3d
      - weather_3n
      - weather_4d
      - weather_4n
      - weather
      - observation_time
      - temp_high_record_c
      - temp_high_1d_c
      - temp_c
      - temp_low_1d_c
      - temp_low_record_c
      - precip_1d
      - precip_1d_mm
      - wind_kph
      - wind_1d_kph
      - alerts
  - platform: fastdotcom
  - platform: cert_expiry
    host: home-assistant.jeanclaudeshore.com
    port: 8123
  - platform: systemmonitor
    resources:
      - type: memory_use_percent
      - type: processor_use


# Text to speech
tts:
  platform: google

group: !include groups.yaml

media_player:
  - platform: pandora

keyboard:

notify:
  - platform: discord
    name: discord
    token: !secret discord_token
  - platform: html5
    name: html5
    gcm_api_key: !secret gcm_server_id
    gcm_sender_id: !secret gcm_sender_id

automation:
  - alias: Weather Forecast
    trigger:
      platform: time
      hours: 5
      minutes: 30
      seconds: 0
    action:
      - service: notify.html5
        data_template:
          message: >
            The weather for {{ states.sensor.pws_weather_1d.attributes.friendly_name }} is{{ ':' }}
            {{ states.sensor.pws_weather_1d.state }}
            {{ states.sensor.pws_weather_1d.attributes.entity_picture }}
            {{ states.sensor.pws_weather_1d.attributes.attribution }}
      - service: notify.discord
        data_template:
          message: >
            The weather for {{ states.sensor.pws_weather_1d.attributes.friendly_name }} is{{ ':' }}
            {{ states.sensor.pws_weather_1d.state }}
            {{ states.sensor.pws_weather_1d.attributes.entity_picture }}
            {{ states.sensor.pws_weather_1d.attributes.attribution }}
          target: !secret discord_general_channel

  - alias: Weather Alerts
    trigger:
      platform: numeric_state
      entity_id: sensor.pws_alerts
      value_template: '{{ state.attributes.value }}'
      above: 0
    action:
      - service: notify.discord
        data_template:
          message: >
            {{ '@everyone' }}
            {{ states.sensor.pws_alerts }}
          target: !secret discord_general_channel
      - service: notify.html5
        data:
          message: 'There are weather alerts in Discord!'
